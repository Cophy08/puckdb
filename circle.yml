machine:
  python:
    version: 3.5.2
  environment:
    PUCKDB_DATABASE: postgres://ubuntu:@127.0.0.1:5432/circle_test

dependencies:
  override:
    - pip install .
    - pip install -r dev-requirements.txt

test:
  override:
    - py.test --cov-config .coveragerc --cov-report xml:$CIRCLE_TEST_REPORTS/coverage.xml --cov puckdb --junitxml $CIRCLE_TEST_REPORTS/test-results.xml tests/
  post:
    - bash <(curl -s https://codecov.io/bash)
